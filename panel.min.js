(async function(){const ui=document.createElement("div");Object.assign(ui.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"#121212",color:"#fff",fontFamily:"Segoe UI, sans-serif",zIndex:99999,display:"flex"});const sideBar=document.createElement("div");Object.assign(sideBar.style,{width:"200px",background:"#1E1E1E",padding:"15px",boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"space-between"});sideBar.innerHTML=`<div><h2 style="color:#E0E0E0;font-size:16px;margin-bottom:15px;">Baho Panel</h2></div><div style="font-size:10px;color:#888;">© 2025 Baho</div>`;const main=document.createElement("div");Object.assign(main.style,{flex:1,display:"flex",flexDirection:"column",padding:"15px",boxSizing:"border-box"});main.innerHTML=`<div id="buttonRow" style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:5px;"><input id="searchInput" type="text" placeholder="Kullanıcı ara..." style="padding:8px 12px;font-size:13px;border-radius:6px;border:none;width:180px;background:#333;color:#fff;caret-color:#FFD700;"><button id="followersBtn">Seni Takip Edenler</button><button id="notFollowersBtn">Seni Takip Etmeyenler</button><button id="downloadBtn">.txt İndir</button></div><div id="activeFilters" style="font-size:12px;margin-bottom:8px;color:#FFD700;">Aktif Filtre: Yok</div><p id="progress" style="font-size:12px;margin-bottom:8px;">İlerleme: 0%</p><div style="flex:1;width:100%;overflow:auto;position:relative;"><div id="loadingOverlay" style="position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(18,18,18,0.9);display:flex;align-items:center;justify-content:center;font-size:22px;color:#FFD700;z-index:10;flex-direction:column;"><div id="startWrapper" style="display:flex;flex-direction:column;align-items:center;justify-content:center;"><button id="startBtn" style="padding:10px 20px;font-size:14px;border-radius:6px;font-weight:bold;border:none;cursor:pointer;margin-bottom:15px;">Başlat</button><div class="spinner" style="border:5px solid #f3f3f3;border-top:5px solid #FFD700;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin-bottom:10px;display:none;"></div><div id="loadingText" style="color:#FFD700;font-size:16px;display:none;">Yükleniyor: 0 kullanıcı (0%)</div></div></div><div id="userList" style="display:flex;flex-direction:column;gap:10px;padding:5px;"></div></div>`;ui.appendChild(sideBar);ui.appendChild(main);document.body.appendChild(ui);const styleEl=document.createElement('style');styleEl.innerHTML=`@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}.card{transition:transform 0.2s,box-shadow 0.2s;}.card:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(255,255,255,0.2);}button{padding:8px 14px;font-size:13px;font-weight:bold;border:none;border-radius:6px;cursor:pointer;}`;document.head.appendChild(styleEl);const getElem=id=>document.getElementById(id);const progressElem=getElem("progress"),userListElem=getElem("userList"),downloadBtn=getElem("downloadBtn"),searchInput=getElem("searchInput"),followersBtn=getElem("followersBtn"),notFollowersBtn=getElem("notFollowersBtn"),activeFiltersElem=getElem("activeFilters"),loadingOverlay=getElem("loadingOverlay"),startBtn=getElem("startBtn"),spinner=loadingOverlay.querySelector(".spinner"),loadingText=getElem("loadingText");const buttonColors={followersBtn:{bg:"#27AE60",hover:"#2ECC71",glow:"rgba(39,174,96,0.6)"},notFollowersBtn:{bg:"#E74C3C",hover:"#FF5733",glow:"rgba(231,76,60,0.6)"},downloadBtn:{bg:"#2980B9",hover:"#3498DB",glow:"rgba(41,128,185,0.6)"},startBtn:{bg:"#FFD700",hover:"#FFE066",glow:"rgba(255,215,0,0.5)"}};[followersBtn,notFollowersBtn,downloadBtn].forEach(btn=>{if(!btn)return;const key=btn.id;btn.style.backgroundColor=buttonColors[key].bg;btn.style.color="#fff";btn.style.fontWeight="bold";btn.style.transition="0.3s box-shadow,0.2s background-color,0.2s transform";btn.onmouseover=()=>{btn.style.backgroundColor=buttonColors[key].hover;btn.style.boxShadow=`0 0 15px 4px ${buttonColors[key].bg},0 0 25px 8px ${buttonColors[key].glow}`;btn.style.transform="scale(1.05)"};btn.onmouseout=()=>{btn.style.backgroundColor=buttonColors[key].bg;btn.style.boxShadow="none";btn.style.transform="scale(1)"}});
if(startBtn){const key="startBtn";startBtn.style.backgroundColor=buttonColors[key].bg;startBtn.style.color="#000";startBtn.style.fontWeight="bold";startBtn.style.transition="0.3s box-shadow,0.2s background-color,0.2s transform";startBtn.onmouseover=()=>{startBtn.style.backgroundColor=buttonColors[key].hover;startBtn.style.boxShadow=`0 0 15px 4px ${buttonColors[key].bg},0 0 25px 8px ${buttonColors[key].glow}`;startBtn.style.transform="scale(1.05)"};startBtn.onmouseout=()=>{startBtn.style.backgroundColor=buttonColors[key].bg;startBtn.style.boxShadow="none";startBtn.style.transform="scale(1)"}}
const getCookie=name=>document.cookie.split('; ').find(r=>r.startsWith(name+'='))?.split('=')[1];const sleep=ms=>new Promise(res=>setTimeout(res,ms));const ds_user_id=getCookie("ds_user_id");let allUsers=[],currentFilteredList=[],doNext=true;let initialURL=`https://www.instagram.com/graphql/query/?query_hash=3dec7e2c57367ef3da3d987d89f9dbc8&variables={"id":"${ds_user_id}","include_reel":true,"fetch_mutual":false,"first":24}`;const afterUrl=cursor=>`https://www.instagram.com/graphql/query/?query_hash=3dec7e2c57367ef3da3d987d89f9dbc8&variables={"id":"${ds_user_id}","include_reel":true,"fetch_mutual":false,"first":24,"after":"${cursor}"}`;const renderList=list=>{userListElem.innerHTML="";list.forEach(user=>{const card=document.createElement("div");card.className="card";Object.assign(card.style,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",background:"#1E1E1E",borderRadius:"8px",padding:"10px",cursor:"pointer",boxSizing:"border-box",minHeight:"80px"});const left=document.createElement("div");Object.assign(left.style,{display:"flex",alignItems:"center",gap:"12px",overflow:"hidden"});const imgWrapper=document.createElement("div");Object.assign(imgWrapper.style,{position:"relative"});const img=document.createElement("img");img.src=user.profile_pic_url;Object.assign(img.style,{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"});imgWrapper.appendChild(img);if(user.has_active_story){const border=document.createElement("div");Object.assign(border.style,{position:"absolute",top:"-2px",left:"-2px",width:"54px",height:"54px",border:"2px solid #00FF00",borderRadius:"50%"});imgWrapper.appendChild(border);}const info=document.createElement("div");Object.assign(info.style,{display:"flex",flexDirection:"column",overflow:"hidden"});const nameRow=document.createElement("div");Object.assign(nameRow.style,{display:"flex",alignItems:"center",gap:"4px"});const a=document.createElement("a");a.href=`https://www.instagram.com/${user.username}/`;a.target="_blank";a.textContent=user.username;Object.assign(a.style,{color:"#FFD700",fontWeight:"bold",fontSize:"13px",textDecoration:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"});nameRow.appendChild(a);if(user.is_verified){const v=document.createElement("span");v.textContent="✔️ Onaylı";v.style.fontSize="10px";v.style.color="#ccc";nameRow.appendChild(v);}const followStatus=document.createElement("div");followStatus.textContent=user.follows_viewer?"✅ Seni Takip Ediyor":"❌ Seni Takip Etmiyor";followStatus.style.fontSize="11px";followStatus.style.color="#aaa";const extraInfo=document.createElement("div");extraInfo.style.fontSize="10px";extraInfo.style.color="#ccc";extraInfo.textContent=`${user.is_private?"🔒 Gizli Hesap":"🌐 Herkese Açık Hesap"} ${user.has_active_story?"🟢 Story var":""} ${user.biography?user.biography.slice(0,40)+(user.biography.length>40?"...":""):""}`;info.appendChild(nameRow);info.appendChild(followStatus);info.appendChild(extraInfo);left.appendChild(imgWrapper);left.appendChild(info);const profileBtn=document.createElement("button");profileBtn.textContent="Profil Git";Object.assign(profileBtn.style,{padding:"4px 10px",fontSize:"11px",borderRadius:"5px",border:"none",cursor:"pointer",backgroundColor:"#888",color:"#fff",fontWeight:"bold",flexShrink:0});profileBtn.onmouseover=()=>profileBtn.style.backgroundColor="#999";profileBtn.onmouseout=()=>profileBtn.style.backgroundColor="#888";profileBtn.onclick=e=>{e.stopPropagation();window.open(`https://www.instagram.com/${user.username}/`,"_blank")};card.appendChild(left);card.appendChild(profileBtn);userListElem.appendChild(card)});};const fetchAllUsers=async()=>{allUsers=[];doNext=true;let totalFetched=0;loadingOverlay.style.display="flex";spinner.style.display="block";loadingText.style.display="block";while(doNext){let res;try{res=await fetch(initialURL).then(r=>r.json())}catch(e){await sleep(2000);continue}const edges=res.data.user.edge_follow.edges;allUsers.push(...edges.map(e=>e.node));totalFetched=allUsers.length;const totalUsers=res.data.user.edge_follow.count||totalFetched;const percent=Math.min(100,Math.round(totalFetched/totalUsers*100));loadingText.textContent=`Yükleniyor: ${totalFetched} kullanıcı (${percent}%)`;progressElem.textContent=`İlerleme: ${percent}%`;doNext=res.data.user.edge_follow.page_info.has_next_page;initialURL=afterUrl(res.data.user.edge_follow.page_info.end_cursor);await sleep(Math.floor(300*Math.random())+500)}loadingOverlay.style.display="none"};const buttonsFilter=[followersBtn,notFollowersBtn];const setActiveButtonFilter=(activeBtn,filteredList)=>{buttonsFilter.forEach(btn=>{btn.style.boxShadow=btn===activeBtn?`0 0 20px ${buttonColors[btn.id].glow}`:"none"});activeFiltersElem.textContent=`Aktif Filtre: ${activeBtn.textContent}`;progressElem.textContent=`İlerleme: ${filteredList.length} kullanıcı`;currentFilteredList=filteredList};followersBtn.onclick=()=>{const f=allUsers.filter(u=>u.follows_viewer);setActiveButtonFilter(followersBtn,f);renderList(f)};notFollowersBtn.onclick=()=>{const f=allUsers.filter(u=>!u.follows_viewer);setActiveButtonFilter(notFollowersBtn,f);renderList(f)};searchInput.addEventListener("input",()=>{const q=searchInput.value.toLowerCase();const base=currentFilteredList.length?currentFilteredList:allUsers;currentFilteredList=base.filter(u=>u.username.toLowerCase().includes(q));renderList(currentFilteredList);activeFiltersElem.textContent=`Aktif Filtre: ${q?`"${q}"`:"Yok"}`;progressElem.textContent=`İlerleme: ${currentFilteredList.length} kullanıcı`});downloadBtn.onclick=()=>{if(!currentFilteredList.length)return alert("İndirilecek kullanıcı yok!");const blob=new Blob([currentFilteredList.map(u=>u.username).join("\n")],{type:"text/plain"});const a=document.createElement("a");a.href=URL.createObjectURL(blob);a.download="kullanici_listesi.txt";a.click()};startBtn.onclick=async()=>{startBtn.style.display="none";spinner.style.display="block";loadingText.style.display="block";await fetchAllUsers();renderList(allUsers)};})();
